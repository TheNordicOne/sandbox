<button
  sbcButton
  ngMenuTrigger
  #triggerButton
  #trigger="ngMenuTrigger"
  [menu]="menu()"
  [severity]="severity()"
  [variant]="variant()"
  [iconLeft]="iconLeft()"
  [iconRight]="iconRight()"
  [iconSizeFactor]="iconSizeFactor()"
  [iconColor]="iconColor()"
  [attr.aria-label]="ariaLabel()"
  [attr.title]="title()"
>
  <ng-content />
</button>

<ng-template
  [cdkConnectedOverlayOpen]="trigger.expanded()"
  [cdkConnectedOverlay]="{
    origin: origin(),
    usePopover: 'inline',
    disableClose: true,
  }"
  [cdkConnectedOverlayPositions]="[
    {
      originX: 'start',
      originY: 'bottom',
      overlayX: 'start',
      overlayY: 'top',
      offsetY: 4,
    },
  ]"
  cdkAttachPopoverAsChild
>
  <div ngMenu #menu="ngMenu">
    <ng-template ngMenuContent>
      @for (item of items(); track item.label) {
        <div ngMenuItem [value]="item.label">
          <!-- Generic Icon Placeholder -->
          <i class="toolbar-button__icon" aria-hidden="true">â—»</i>
          <button class="action" (click)="item.onSelect(data())">
            {{ item.label }}
          </button>
        </div>
      }
    </ng-template>
  </div>
</ng-template>
